# 04 운영체제와 부팅

하드웨어를 동작시키는 데 가장 중요한 시스템 소프트웨어는 운영체제이다. 이 절에서는 운영체제가 무엇인지, 그리고 컴퓨터의 전원을 인가했을 때 운영체제가 어떤 과정으로 동작하는 지 살펴본다.

### 1 운영체제
운영체제는 하드웨어 자원을 효율적으로 관리하고, 또한 응용 프로그램의 공통된 서비스를 제공하는 소프트웨어의 모음이다. 운영체제는 실제 컴퓨터보다 더욱 좋은 환경의 가상 컴퓨터를 사용자에게 제공하기 위해 입출력 동작, 메모리 할당과 같은 세부 사항을 숨긴다.
운영체제는 다음과 같은 기능을 수행한다.
- 컴퓨터 시스템의 하드웨어 자원 관리
- 사용자와 하드웨어 사이의 인터페이스 역할
- 하드웨어의 고장 탐색, 오류 처리, 보안 유지

### 2 부팅
부팅은 운영체제가 컴퓨터 하드웨어를 관리하고 응용 소프트웨어를 실행할 수 있도록 컴퓨터에 시동을 거는 것으로, 보조기억장치에 저장된 운영체제를 메인 메모리에 불러들이는 과정을 말한다. 부트스트랩(Bootstrap), IPL(Initial Program Load)이라고도 한다.

- 모든 소프트웨어는 하드웨어에서 동작하기 위해 메인 메모리인 RAM에 적재되어야 한다. CPU는 RAM에 적재된 프로그램만 실행할 수 있기 때문이다.
- RAM은 휘발성 기억장치이므로 전원이 차단되면 RAM에 저장된 모든 내용이 소멸된다. 즉, 컴퓨터의 전원을 새롭게 인가하면 RAM에 아무 내용이 없다.
- 운영체제가 RAM에 적재되어 있지 않기 때문에 컴퓨터의 전원을 켜면 운영체제를 하드웨어에서 실행할 수 없다.
- 따라서 응용 소프트웨어도 실행할 수 없다.
이를 해결하기 위해 부트로더(Bootloader)와 ROM을 사용한다. 

- **부트로더(Bootloader, Bootstrap Loader)** : 하드디스크와 같은 보조기억장치에 저장된 운영체제를 메인 메모리에 단계적으로 적재하는 소규모 프로그램 ROM에 저장된 고정 프로그램으로 펌웨어에 속함
- **ROM** : 메인 메모리로 사용되는 RAM처럼 CPU가 프로그램을 수행할 수 있는 기억 공간. RAM과 달리 저장된 내용을 수정 불가. 전원 제공 여부와 상관없는 비휘발성 메모리. 따라서 ROM에 저장되어 있는 부트로더는 운영체제의 위치를 알기 때문에 운영체제를 RAM에 적재 가능
![일반적인 컴퓨터 부팅 과정](https://user-images.githubusercontent.com/52726195/110628004-f30ad780-81e5-11eb-88f9-f75e1ed4078a.png)
부팅 과정을 두 단계 이상으로 수행하여 운영체제의 위치에 대한 융통성을 제공하고 부트로더 프로그램을 소규모로 유지하는 경우도 있다. 예를 들어, 데스크톱 컴퓨터의 경우 BIOS라는 펌웨어 실행 단계를 추가하여 부팅 과정을 수행한다. 이때 부트로더는 ROM에 저장되지 않고 하드디스크의 첫 번째 섹터인 MBR(Master Boot Record)에 저장된다. 그러면 컴퓨터에 전원을 인가한 직후 부트로더를 실행하지 않고 ROM에 저장된 BIOS가 먼저 실행된다.

1. 컴퓨터에 전원을 인가하면 ROM에 저장된 BIOS가 실행된다.
2. BIOS는 CPU, 메인 메모리, 하드디스크와 같은 각종 하드웨어의 상태를 검사한 후 이상이 있으면 오류를 통지하고 동작을 멈춘다.
3. BIOS는 부팅 매체인 하드디스크에 저장된 부트로더를 메인 메모리로 옮긴다. 2개 이상의 부팅 매체를 지정하여 BIOS로 하여금 운영체제를 선택하도록 할 수도 있는데, 이를 멀티 부팅이라고 한다.
4. 부트로더는 BIOS를 종료하고 하드디스크에 저장된 운영체제를 메인 메모리에 적재한 후 운영체제에 제어권을 넘긴다.
5. 운영체제는 응용 소프트웨어의 실행 환경을 조성한다.
부팅이 완료된 후 사용자가 애플리케이션을 실행하면 운영체제는 로더를 통해 하드디스크에 있는 애플리케이션을 메모리에 적재한 후 실행한다.